<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Basics</title>
  <script src="assets/global_vars.js" defer></script>
  <script src="assets/langdata.js" defer></script>
  <script src="assets/functions.js" defer></script>
  <script src="assets/app.js" defer></script><!--
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">-->
  <link rel="stylesheet" href="assets/static.css" />
  <link rel="stylesheet" href="assets/defstyle.css" />
  <link rel="stylesheet" href="assets/dynamic.css" />
</head>
<body>
<section id="header">
  <span id="headerBanner"></span>
  <span id="headerContent">
    <a class="pageLink" id="menuBtn">
      <div id="sitenav" style="display:none;">
        <a class="menuLink" id="mainLink" href="index.html"></a>
        <a class="menuLink" id="bioLink" href="?p=bio"></a>
        <a class="menuLink" id="skillsLink" href="?p=skill"></a>
        <a class="menuLink" id="todoLink" href="?p=todo"></a>
        <a class="menuLink" id="contactLink" href="?p=contact"></a>
<!--        <a class="menuLink" id="qLink" href="?p=ask"></a>-->
      </div>
    </a>
    <a class="pageLink" id="menuBtnMobile">
      <div id="sitenav" style="display:none;">
        <a class="menuLink" id="mainLink" href="index.html"></a>
        <a class="menuLink" id="bioLink" href="?p=bio"></a>
        <a class="menuLink" id="skillsLink" href="?p=skill"></a>
        <a class="menuLink" id="todoLink" href="?p=todo"></a>
        <a class="menuLink" id="contactLink" href="?p=contact"></a>
<!--        <a class="menuLink" id="qLink" href="?p=ask"></a>-->
      </div>
    </a>
    &nbsp;
    <a class="pageLink" id="accrBtn" href="?p=accr"></a>
    <a class="pageLink" id="accrBtnMobile" href="?p=accr"></a>
    &nbsp;
    <a class="pageLink" id="langLink"></a>
    <a class="pageLink" id="langLinkMobile"></a>
  </span>
</section>
<section id="main">
  <section id="sideLinks">
    <span id="sidepanel"></span><br />
    <span id="timeSpan" style="font-size: 80%;"></span>
  </section>
  <section id="viewport">
<form id="questionForm">
    <input type="text" id="questionInput" placeholder="Ask a question" required />
    <button type="submit">Submit</button>
</form>
<ul id="questionsList"></ul>

<script>
const backendUrl = 'https://port-viks.onrender.com'; // Replace with your Render backend URL

// Function to post a new question
async function postQuestion() {
  const questionInput = document.getElementById('questionInput').value;
  if (!questionInput) {
    alert('Please enter a question!');
    return;
  }

  try {
    const response = await fetch(`${backendUrl}/recommendation`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ question: questionInput })
    });

    if (!response.ok) {
      throw new Error('Failed to post question');
    }

    const data = await response.json();
    alert(`Question added: ${data.question.content}`);
    loadQuestions(); // Refresh questions
  } catch (error) {
    console.error(error);
    alert('Error adding question!');
  }
}

// Function to load all questions
async function loadQuestions() {
  try {
    const response = await fetch(`${backendUrl}/recommendation`);
    if (!response.ok) {
      throw new Error('Failed to fetch questions');
    }

    const data = await response.json();
    const questionList = document.getElementById('questionList');
    questionList.innerHTML = ''; // Clear existing questions

    data.questions.forEach((q) => {
      const li = document.createElement('li');
      li.textContent = q.content;
      questionList.appendChild(li);
    });
  } catch (error) {
    console.error(error);
    alert('Error fetching questions!');
  }
}

// Load questions when the page loads
window.onload = loadQuestions;
</script>
  </section>

</section>
<section id="bottomLinks">
  <span id="timeSpanMobile" style="font-size: 85%;"></span><br />
  <span id="bottompanel" ></span>
</section>

</body>
</html>
